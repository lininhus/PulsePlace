<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PulsePlace</title>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <div class="container-xxl">
    <h2>Registrar-se</h2>
    <input type="text" id="nome" placeholder="Nome" required />
    <input type="email" id="email" placeholder="Email" required />
    
<div class="senha-container">
    <input type="password" id="senha" placeholder="Digite sua senha">
    <span class="olho" onclick="mostrarSenha()">üëÅÔ∏è</span>
  </div>

  <script>
    function mostrarSenha() {
      const campoSenha = document.getElementById("senha");
      if (campoSenha.type === "password") {
        campoSenha.type = "text";
      } else {
        campoSenha.type = "password";
      }
    }
  </script>

    <label for="nascimento">Data de nascimento</label>
    <div class="dob-selects">
      <select id="dia"></select>
      <select id="mes"></select>
      <select id="ano"></select>
    </div>

    <select id="localizacaoTipo" onchange="toggleEnderecoFields()">
      <option value="">Escolha o tipo de localiza√ß√£o</option>
      <option value="cep">CEP</option>
      <option value="manual">Endere√ßo Manual</option>
    </select>

    <input type="text" id="cep" placeholder="Digite seu CEP" onblur="buscarCEP()" style="display: none;" />

    <div class="address-fields" id="addressFields">
      <input type="text" id="rua" placeholder="Rua" />
      <input type="text" id="bairro" placeholder="Bairro" />
      <input type="text" id="cidade" placeholder="Cidade" />
      <input type="text" id="estado" placeholder="Estado" />
    </div>

    <button onclick="registrarUsuario()">Registrar</button>
  </div>

  <script>
    // Preencher selects de data
    function preencherDatas() {
      const diaSelect = document.getElementById('dia');
      const mesSelect = document.getElementById('mes');
      const anoSelect = document.getElementById('ano');

      diaSelect.innerHTML = '<option value="">Dia</option>';
      mesSelect.innerHTML = '<option value="">M√™s</option>';
      anoSelect.innerHTML = '<option value="">Ano</option>';

      for (let i = 1; i <= 31; i++) {
        diaSelect.innerHTML += `<option value="${i}">${i}</option>`;
      }
      for (let i = 1; i <= 12; i++) {
        mesSelect.innerHTML += `<option value="${i}">${i}</option>`;
      }
      for (let i = 2025; i >= 1900; i--) {
        anoSelect.innerHTML += `<option value="${i}">${i}</option>`;
      }
    }

    preencherDatas();

    function toggleEnderecoFields() {
      const tipo = document.getElementById('localizacaoTipo').value;
      const cepInput = document.getElementById('cep');
      const addressFields = document.getElementById('addressFields');

      if (tipo === 'cep') {
        cepInput.style.display = 'block';
        addressFields.style.display = 'block';
      } else if (tipo === 'manual') {
        cepInput.style.display = 'none';
        addressFields.style.display = 'block';
      } else {
        cepInput.style.display = 'none';
        addressFields.style.display = 'none';
      }
    }

    function buscarCEP() {
      const cep = document.getElementById('cep').value.replace(/\D/g, '');
      if (cep.length !== 8) {
        alert('CEP inv√°lido');
        return;
      }
      fetch(`https://viacep.com.br/ws/${cep}/json/`)
        .then(response => response.json())
        .then(data => {
          if (data.erro) {
            alert('CEP n√£o encontrado');
            return;
          }
          document.getElementById('rua').value = data.logradouro || '';
          document.getElementById('bairro').value = data.bairro || '';
          document.getElementById('cidade').value = data.localidade || '';
          document.getElementById('estado').value = data.uf || '';
        })
        .catch(() => alert('Erro ao buscar CEP'));
    }

    function registrarUsuario() {
      const nome = document.getElementById('nome').value.trim();
      const email = document.getElementById('email').value.trim();
      const dia = document.getElementById('dia').value;
      const mes = document.getElementById('mes').value;
      const ano = document.getElementById('ano').value;
      const localizacaoTipo = document.getElementById('localizacaoTipo').value;

      if (!nome || !email || !dia || !mes || !ano || !localizacaoTipo) {
        alert("Por favor, preencha todos os campos.");
        return;
      }

      let localizacao = '';
      if (localizacaoTipo === 'cep' || localizacaoTipo === 'manual') {
        const rua = document.getElementById('rua').value.trim();
        const bairro = document.getElementById('bairro').value.trim();
        const cidade = document.getElementById('cidade').value.trim();
        const estado = document.getElementById('estado').value.trim();
        localizacao = `${rua}, ${bairro}, ${cidade} - ${estado}`;
      }

      if (!localizacao) {
        alert("Por favor, preencha os dados de localiza√ß√£o.");
        return;
      }

      alert("Usu√°rio registrado com sucesso! Redirecionando para a tela inicial...");
      // window.location.href = "home.html";
    }
  </script>
</body>
</html>
